const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D3es7SR8.js","assets/index-COGzeU-K.css"])))=>i.map(i=>d[i]);
import{d as b,c as S,o as f,a as re,u as K,r as j,b as $,n as Ae,e as m,w as L,f as v,g as X,t as Ke,_ as ie,h as J,i as Ze,v as He,j as G,F as U,s as qe,k as ce,m as Se,p as Y,q as h,x as We,y as M,z as B,A as O,B as D,C as k,D as me,E as I,G as Ce,H as ye,I as Je,J as Xe,K as Ye,L as Qe}from"./index-D3es7SR8.js";const et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},tt=b({name:"CloseOutlined",render:function(e,o){return f(),S("svg",et,o[0]||(o[0]=[re("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8L295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512L196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1l216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",fill:"currentColor"},null,-1)]))}}),ot=b({__name:"key-card-polygon",props:{keyId:{},polygon:{},number:{}},setup(t){const e=K();function o(){e.removePolygon(t.polygon.id)}function n(){e.startDrawing(t.keyId,t.polygon.id)}return(l,a)=>{var s;const r=j("ui-button"),i=j("ui-spacing");return f(),$(i,{class:Ae(["polygon-card",{active:((s=m(e).drawingPolygon)==null?void 0:s.id)===l.polygon.id}]),align:"center",gap:"sm"},{default:L(()=>{var u;return[v(r,{disabled:((u=m(e).drawingPolygon)==null?void 0:u.id)===l.polygon.id,onClick:n,class:"key-draw-control-btn",size:"sm",variant:"outlined"},{default:L(()=>[X(" Draw #"+Ke(l.number),1)]),_:1},8,["disabled"]),v(r,{class:"key-draw-control-btn remove-polygon-btn",size:"sm",variant:"outlined",onClick:o},{default:L(()=>[v(m(tt))]),_:1})]}),_:1},8,["class"])}}}),nt=ie(ot,[["__scopeId","data-v-55d752ba"]]),lt=b({__name:"key-card",props:{id:{},number:{}},setup(t){const e=K(),o=J(()=>e.findKeyById(t.id));function n(){e.removeKey(o.value.id)}function l(){e.createPolygon(t.id)}return(a,r)=>{const i=j("ui-input"),s=j("ui-button"),u=j("ui-spacing"),d=j("ui-card");return f(),$(d,{class:"key-card",size:"sm"},{default:L(()=>[v(u,{vertical:"",gap:"sm",align:"stretch"},{default:L(()=>[v(i,{placeholder:`Key #${a.number}`,size:"sm",modelValue:o.value.name,"onUpdate:modelValue":r[0]||(r[0]=c=>o.value.name=c),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"]),Ze(re("input",{class:"color-input",type:"color","onUpdate:modelValue":r[1]||(r[1]=c=>o.value.color=c)},null,512),[[He,o.value.color,void 0,{lazy:!0}]]),(f(!0),S(U,null,G(o.value.polygons,(c,w)=>(f(),$(nt,{key:c.id,keyId:a.id,polygon:c,number:w+1},null,8,["keyId","polygon","number"]))),128)),v(s,{size:"sm",onClick:l},{default:L(()=>r[2]||(r[2]=[X("Add polygon")])),_:1,__:[2]}),v(s,{size:"sm",onClick:n},{default:L(()=>r[3]||(r[3]=[X("Remove")])),_:1,__:[3]})]),_:1})]),_:1})}}}),at=ie(lt,[["__scopeId","data-v-bef5fa82"]]),rt={class:"scroll-area"},st={class:"draw-btn-wrap"},it=b({__name:"new-region-controls",setup(t){const e=K(),{region:o}=qe(e);return(n,l)=>{const a=j("ui-input"),r=j("ui-button"),i=j("ui-spacing"),s=j("ui-wrapper");return m(e).isDrawing?(f(),$(s,{key:0,class:"controls",onClick:l[1]||(l[1]=Se(()=>{},["stop"])),onWheel:l[2]||(l[2]=Se(()=>{},["stop"])),paddings:"both"},{default:L(()=>[re("div",rt,[v(i,{class:"content",vertical:"",fill:"",align:"stretch",gap:"sm"},{default:L(()=>[v(a,{placeholder:"Region name",size:"sm",class:"region-name-input",modelValue:m(o).name,"onUpdate:modelValue":l[0]||(l[0]=u=>m(o).name=u)},null,8,["modelValue"]),v(r,{size:"sm",onClick:m(e).saveRegionToFile},{default:L(()=>l[3]||(l[3]=[X(" Save region ")])),_:1,__:[3]},8,["onClick"]),re("div",st,[v(r,{disabled:!m(e).drawingPolygon,onClick:m(e).stopDrawing,class:"key-draw-control-btn",size:"sm",variant:"outlined"},{default:L(()=>l[4]||(l[4]=[X(" Stop drawing ")])),_:1,__:[4]},8,["disabled","onClick"])]),(f(!0),S(U,null,G(m(e).region.keys,(u,d)=>(f(),$(at,{id:u.id,key:u.id,number:d+1},null,8,["id","number"]))),128)),v(r,{size:"sm",onClick:m(e).createKey},{default:L(()=>l[5]||(l[5]=[X("Add key")])),_:1,__:[5]},8,["onClick"])]),_:1})])]),_:1})):ce("",!0)}}}),ut=ie(it,[["__scopeId","data-v-a2d39276"]]),Oe=(t,e)=>{for(const o of Object.keys(e))t.on(o,e[o])},ke=t=>{for(const e of Object.keys(t)){const o=t[e];o&&F(o.cancel)&&o.cancel()}},dt=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),F=t=>typeof t=="function",E=(t,e,o)=>{for(const n in o){const l="set"+dt(n);t[l]?Ce(()=>o[n],(a,r)=>{t[l](a,r)}):e[l]&&Ce(()=>o[n],a=>{e[l](a)})}},P=(t,e,o={})=>{const n={...o};for(const l in t){const a=e[l],r=t[l];a&&(a&&a.custom===!0||r!==void 0&&(n[l]=r))}return n},Z=t=>{const e={},o={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const l=n.slice(2).toLocaleLowerCase();e[l]=t[n]}else o[n]=t[n];return{listeners:e,attrs:o}},pt=async t=>{const e=await Promise.all([O(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),O(()=>import("./marker-icon-C2eJqgqv.js"),[]),O(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},le=t=>{const e=h((...n)=>console.warn(`Method ${t} has been invoked without being replaced`)),o=(...n)=>e.value(...n);return o.wrapped=e,M(t,o),o},ae=(t,e)=>t.wrapped.value=e,T=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,R=t=>{const e=I(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},z=Symbol("useGlobalLeaflet"),H=Symbol("addLayer"),fe=Symbol("removeLayer"),oe=Symbol("registerControl"),ct=Symbol("registerLayerControl"),je=Symbol("canSetParentHtml"),Be=Symbol("setParentHtml"),Ie=Symbol("setIcon"),mt=Symbol("bindPopup"),yt=Symbol("bindTooltip"),ft=Symbol("unbindPopup"),vt=Symbol("unbindTooltip"),ne={options:{type:Object,default:()=>({}),custom:!0}},ue=t=>({options:t.options,methods:{}}),Q={...ne,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},ve=(t,e,o)=>{const n=R(H),l=R(fe),{options:a,methods:r}=ue(t),i=P(t,Q,a),s=()=>n({leafletObject:e.value}),u=()=>l({leafletObject:e.value}),d={...r,setAttribution(c){u(),e.value.options.attribution=c,t.visible&&s()},setName(){u(),t.visible&&s()},setLayerType(){u(),t.visible&&s()},setVisible(c){e.value&&(c?s():u())},bindPopup(c){if(!e.value||!F(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(c)},bindTooltip(c){if(!e.value||!F(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(c)},unbindTooltip(){e.value&&(F(e.value.closeTooltip)&&e.value.closeTooltip(),F(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(F(e.value.closePopup)&&e.value.closePopup(),F(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(c){o.emit("update:visible",c)}};return M(mt,d.bindPopup),M(yt,d.bindTooltip),M(ft,d.unbindPopup),M(vt,d.unbindTooltip),ye(()=>{d.unbindPopup(),d.unbindTooltip(),u()}),{options:i,methods:d}},ge=(t,e)=>{if(t&&e.default)return Y("div",{style:{display:"none"}},e.default())},Ee={...Q,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},gt=(t,e,o)=>{const{options:n,methods:l}=ve(t,e,o);return{options:P(t,Ee,n),methods:l}},be={...Ee,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},bt=(t,e,o)=>{const{options:n,methods:l}=gt(t,e,o),a=P(t,be,n),r=R(fe),i={...l,setStroke(s){e.value.setStyle({stroke:s})},setColor(s){e.value.setStyle({color:s})},setWeight(s){e.value.setStyle({weight:s})},setOpacity(s){e.value.setStyle({opacity:s})},setLineCap(s){e.value.setStyle({lineCap:s})},setLineJoin(s){e.value.setStyle({lineJoin:s})},setDashArray(s){e.value.setStyle({dashArray:s})},setDashOffset(s){e.value.setStyle({dashOffset:s})},setFill(s){e.value.setStyle({fill:s})},setFillColor(s){e.value.setStyle({fillColor:s})},setFillOpacity(s){e.value.setStyle({fillOpacity:s})},setFillRule(s){e.value.setStyle({fillRule:s})},setClassName(s){e.value.setStyle({className:s})}};return me(()=>{r({leafletObject:e.value})}),{options:a,methods:i}},_t={...be,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({..._t});const ee={...ne,position:{type:String}},de=(t,e)=>{const{options:o,methods:n}=ue(t),l=P(t,ee,o),a={...n,setPosition(r){e.value&&e.value.setPosition(r)}};return ye(()=>{e.value&&e.value.remove()}),{options:l,methods:a}},ht=t=>t.default?Y("div",{ref:"root"},t.default()):null;b({name:"LControl",props:{...ee,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const o=h(),n=h(),l=I(z),a=R(oe),{options:r,methods:i}=de(t,o);return B(async()=>{const{Control:s,DomEvent:u}=l?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),d=s.extend({onAdd(){return n.value}});o.value=D(new d(r)),E(i,o.value,t),a({leafletObject:o.value}),t.disableClickPropagation&&n.value&&u.disableClickPropagation(n.value),t.disableScrollPropagation&&n.value&&u.disableScrollPropagation(n.value),k(()=>e.emit("ready",o.value))}),{root:n,leafletObject:o}},render(){return ht(this.$slots)}});const ze={...ee,prefix:{type:String}},wt=(t,e)=>{const{options:o,methods:n}=de(t,e),l=P(t,ze,o),a={...n,setPrefix(r){e.value.setPrefix(r)}};return{options:l,methods:a}},Lt=b({name:"LControlAttribution",props:ze,setup(t,e){const o=h(),n=I(z),l=R(oe),{options:a,methods:r}=wt(t,o);return B(async()=>{const{control:i}=n?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(i.attribution(a)),E(r,o.value,t),l({leafletObject:o.value}),k(()=>e.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...ee});const De={...ee,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},St=(t,e)=>{const{options:o,methods:n}=de(t,e);return{options:P(t,De,o),methods:n}},Ct=b({name:"LControlScale",props:De,setup(t,e){const o=h(),n=I(z),l=R(oe),{options:a,methods:r}=St(t,o);return B(async()=>{const{control:i}=n?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(i.scale(a)),E(r,o.value,t),l({leafletObject:o.value}),k(()=>e.emit("ready",o.value))}),{leafletObject:o}},render(){return null}}),Ne={...ee,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Ot=(t,e)=>{const{options:o,methods:n}=de(t,e);return{options:P(t,Ne,o),methods:n}},Rt=b({name:"LControlZoom",props:Ne,setup(t,e){const o=h(),n=I(z),l=R(oe),{options:a,methods:r}=Ot(t,o);return B(async()=>{const{control:i}=n?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(i.zoom(a)),E(r,o.value,t),l({leafletObject:o.value}),k(()=>e.emit("ready",o.value))}),{leafletObject:o}},render(){return null}}),xe={...Q};({...xe});({...xe});const _e={...Q,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Ve=(t,e,o)=>{const{options:n,methods:l}=ve(t,e,o),a=P(t,_e,n),r={...l,setTileComponent(){var i;(i=e.value)==null||i.redraw()}};return ye(()=>{e.value.off()}),{options:a,methods:r}},Pt=(t,e,o,n)=>t.extend({initialize(l){this.tileComponents={},this.on("tileunload",this._unloadTile),o.setOptions(this,l)},createTile(l){const a=this._tileCoordsToKey(l);this.tileComponents[a]=e.create("div");const r=Y({setup:n,props:["coords"]},{coords:l});return Je(r,this.tileComponents[a]),this.tileComponents[a]},_unloadTile(l){const a=this._tileCoordsToKey(l.coords);this.tileComponents[a]&&(this.tileComponents[a].innerHTML="",this.tileComponents[a]=void 0)}});b({props:{..._e,childRender:{type:Function,required:!0}},setup(t,e){const o=h(),n=h(null),l=h(!1),a=I(z),r=R(H),{options:i,methods:s}=Ve(t,o,e);return B(async()=>{const{GridLayer:u,DomUtil:d,Util:c}=a?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),w=Pt(u,d,c,t.childRender);o.value=D(new w(i));const{listeners:y}=Z(e.attrs);o.value.on(y),E(s,o.value,t),r({...t,...s,leafletObject:o.value}),l.value=!0,k(()=>e.emit("ready",o.value))}),{root:n,ready:l,leafletObject:o}},render(){return this.ready?Y("div",{style:{display:"none"},ref:"root"}):null}});const Re={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};b({name:"LIcon",props:{...Re,...ne},setup(t,e){const o=h(),n=I(z),l=R(je),a=R(Be),r=R(Ie);let i,s,u,d,c;const w=(x,_,C)=>{const A=x&&x.innerHTML;if(!_){C&&c&&l()&&a(A);return}const{listeners:W}=Z(e.attrs);c&&s(c,W);const{options:pe}=ue(t),V=P(t,Re,pe);A&&(V.html=A),c=V.html?u(V):d(V),i(c,W),r(c)},y=()=>{k(()=>w(o.value,!0,!1))},N=()=>{k(()=>w(o.value,!1,!0))},q={setIconUrl:y,setIconRetinaUrl:y,setIconSize:y,setIconAnchor:y,setPopupAnchor:y,setTooltipAnchor:y,setShadowUrl:y,setShadowRetinaUrl:y,setShadowAnchor:y,setBgPos:y,setClassName:y,setHtml:y};return B(async()=>{const{DomEvent:x,divIcon:_,icon:C}=n?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);i=x.on,s=x.off,u=_,d=C,E(q,{},t),new MutationObserver(N).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),y()}),{root:o}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Y("div",{ref:"root"},t)}});({...Q});function Me(t,e,o){var n,l,a;e===void 0&&(e=50),o===void 0&&(o={});var r=(n=o.isImmediate)!=null&&n,i=(l=o.callback)!=null&&l,s=o.maxWait,u=Date.now(),d=[];function c(){if(s!==void 0){var y=Date.now()-u;if(y+e>=s)return s-y}return e}var w=function(){var y=[].slice.call(arguments),N=this;return new Promise(function(q,x){var _=r&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,u=Date.now(),!r){var A=t.apply(N,y);i&&i(A),d.forEach(function(W){return(0,W.resolve)(A)}),d=[]}},c()),_){var C=t.apply(N,y);return i&&i(C),q(C)}d.push({resolve:q,reject:x})})};return w.cancel=function(y){a!==void 0&&clearTimeout(a),d.forEach(function(N){return(0,N.reject)(y)}),d=[]},w}const Pe={...ne,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Tt=b({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Pe,setup(t,e){const o=h(),n=We({ready:!1,layersToAdd:[],layersInControl:[]}),{options:l}=ue(t),a=P(t,Pe,l),{listeners:r,attrs:i}=Z(e.attrs),s=le(H),u=le(fe),d=le(oe),c=le(ct);M(z,t.useGlobalLeaflet);const w=J(()=>{const _={};return t.noBlockingAnimations&&(_.animate=!1),_}),y=J(()=>{const _=w.value;return t.padding&&(_.padding=t.padding),t.paddingTopLeft&&(_.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(_.paddingBottomRight=t.paddingBottomRight),_}),N={moveend:Me(_=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(_){const C=n.layersInControl.find(A=>A.name===_.name);C&&C.updateVisibleProp(!0)},overlayremove(_){const C=n.layersInControl.find(A=>A.name===_.name);C&&C.updateVisibleProp(!1)}};B(async()=>{t.useGlobalLeaflet&&(T.L=T.L||await O(()=>import("./index-D3es7SR8.js").then(p=>p.l),__vite__mapDeps([0,1])));const{map:_,CRS:C,Icon:A,latLngBounds:W,latLng:pe,stamp:V}=t.useGlobalLeaflet?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{a.beforeMapMount&&await a.beforeMapMount()}catch(p){console.error(`The following error occurred running the provided beforeMapMount hook ${p.message}`)}await pt(A);const Ge=typeof a.crs=="string"?C[a.crs]:a.crs;a.crs=Ge||C.EPSG3857;const te={addLayer(p){p.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(p):n.layersInControl.find(g=>V(g.leafletObject)===V(p.leafletObject))||(n.layerControl.addLayer(p),n.layersInControl.push(p))),p.visible!==!1&&n.leafletRef.addLayer(p.leafletObject)},removeLayer(p){p.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(g=>g.name!==p.name):(n.layerControl.removeLayer(p.leafletObject),n.layersInControl=n.layersInControl.filter(g=>V(g.leafletObject)!==V(p.leafletObject)))),n.leafletRef.removeLayer(p.leafletObject)},registerLayerControl(p){n.layerControl=p,n.layersToAdd.forEach(g=>{n.layerControl.addLayer(g)}),n.layersToAdd=[],d(p)},registerControl(p){n.leafletRef.addControl(p.leafletObject)},setZoom(p){const g=n.leafletRef.getZoom();p!==g&&n.leafletRef.setZoom(p,w.value)},setCrs(p){const g=n.leafletRef.getBounds();n.leafletRef.options.crs=p,n.leafletRef.fitBounds(g,{animate:!1,padding:[0,0]})},fitBounds(p){n.leafletRef.fitBounds(p,y.value)},setBounds(p){if(!p)return;const g=W(p);g.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(g,0)&&(n.lastSetBounds=g,n.leafletRef.fitBounds(g))},setCenter(p){if(p==null)return;const g=pe(p),Le=n.lastSetCenter||n.leafletRef.getCenter();(Le.lat!==g.lat||Le.lng!==g.lng)&&(n.lastSetCenter=g,n.leafletRef.panTo(g,w.value))}};ae(s,te.addLayer),ae(u,te.removeLayer),ae(d,te.registerControl),ae(c,te.registerLayerControl),n.leafletRef=D(_(o.value,a)),E(te,n.leafletRef,t),Oe(n.leafletRef,N),Oe(n.leafletRef,r),n.ready=!0,k(()=>e.emit("ready",n.leafletRef))}),me(()=>{ke(N),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const q=J(()=>n.leafletRef),x=J(()=>n.ready);return{root:o,ready:x,leafletObject:q,attrs:i}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Y("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),At=["Symbol(Comment)","Symbol(Text)"],kt=["LTooltip","LPopup"],$e={...Q,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},jt=(t,e,o)=>{const{options:n,methods:l}=ve(t,e,o),a=P(t,$e,n),r={...l,setDraggable(i){e.value.dragging&&(i?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(i){o.emit("update:latLng",i.latlng),o.emit("update:lat-lng",i.latlng)},setLatLng(i){if(i!=null&&e.value){const s=e.value.getLatLng();(!s||!s.equals(i))&&e.value.setLatLng(i)}}};return{options:a,methods:r}},Bt=(t,e)=>{const o=e.slots.default&&e.slots.default();return o&&o.length&&o.some(It)};function It(t){return!(At.includes(t.type.toString())||kt.includes(t.type.name))}const Et=b({name:"LMarker",props:$e,setup(t,e){const o=h(),n=h(!1),l=I(z),a=R(H);M(je,()=>{var u;return!!((u=o.value)!=null&&u.getElement())}),M(Be,u=>{var d,c;const w=F((d=o.value)==null?void 0:d.getElement)&&((c=o.value)==null?void 0:c.getElement());w&&(w.innerHTML=u)}),M(Ie,u=>{var d;return((d=o.value)==null?void 0:d.setIcon)&&o.value.setIcon(u)});const{options:r,methods:i}=jt(t,o,e),s={moveHandler:Me(i.latLngSync)};return B(async()=>{const{marker:u,divIcon:d}=l?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);Bt(r,e)&&(r.icon=d({className:""})),o.value=D(u(t.latLng,r));const{listeners:c}=Z(e.attrs);o.value.on(c),o.value.on("move",s.moveHandler),E(i,o.value,t),a({...t,...i,leafletObject:o.value}),n.value=!0,k(()=>e.emit("ready",o.value))}),me(()=>ke(s)),{ready:n,leafletObject:o}},render(){return ge(this.ready,this.$slots)}}),he={...be,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Ue=(t,e,o)=>{const{options:n,methods:l}=bt(t,e,o),a=P(t,he,n),r={...l,setSmoothFactor(i){e.value.setStyle({smoothFactor:i})},setNoClip(i){e.value.setStyle({noClip:i})},addLatLng(i){e.value.addLatLng(i)}};return{options:a,methods:r}},se={...he},zt=(t,e,o)=>{const{options:n,methods:l}=Ue(t,e,o),a=P(t,se,n),r={...l,toGeoJSON(i){return e.value.toGeoJSON(i)}};return{options:a,methods:r}},Dt=b({name:"LPolygon",props:se,setup(t,e){const o=h(),n=h(!1),l=I(z),a=R(H),{options:r,methods:i}=zt(t,o,e);return B(async()=>{const{polygon:s}=l?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(s(t.latLngs,r));const{listeners:u}=Z(e.attrs);o.value.on(u),E(i,o.value,t),a({...t,...i,leafletObject:o.value}),n.value=!0,k(()=>e.emit("ready",o.value))}),{ready:n,leafletObject:o}},render(){return ge(this.ready,this.$slots)}}),Nt=b({name:"LPolyline",props:he,setup(t,e){const o=h(),n=h(!1),l=I(z),a=R(H),{options:r,methods:i}=Ue(t,o,e);return B(async()=>{const{polyline:s}=l?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(s(t.latLngs,r));const{listeners:u}=Z(e.attrs);o.value.on(u),E(i,o.value,t),a({...t,...i,leafletObject:o.value}),n.value=!0,k(()=>e.emit("ready",o.value))}),{ready:n,leafletObject:o}},render(){return ge(this.ready,this.$slots)}}),Fe={...ne,content:{type:String,default:null}};({...Fe});({...se,latLngs:{...se.latLngs}});const we={..._e,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},xt=(t,e,o)=>{const{options:n,methods:l}=Ve(t,e,o),a=P(t,we,n),r={...l};return{options:a,methods:r}},Vt=b({props:we,setup(t,e){const o=h(),n=I(z),l=R(H),{options:a,methods:r}=xt(t,o,e);return B(async()=>{const{tileLayer:i}=n?T.L:await O(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);o.value=D(i(t.url,a));const{listeners:s}=Z(e.attrs);o.value.on(s),E(r,o.value,t),l({...t,...r,leafletObject:o.value}),k(()=>e.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...Fe});({...we});const Mt=b({__name:"map-polylines",setup(t){const e=K();return(o,n)=>(f(!0),S(U,null,G(m(e).region.keys,l=>(f(),S("div",{key:l.id},[(f(!0),S(U,null,G(l.polygons,a=>{var r;return f(),S("div",{key:a.id},[((r=m(e).drawingPolygon)==null?void 0:r.id)===a.id?(f(),$(m(Nt),{key:0,id:a.id,"lat-lngs":a.latlngs,color:l.color,weight:1},null,8,["id","lat-lngs","color"])):ce("",!0)])}),128))]))),128))}}),$t=b({__name:"map-polygons",setup(t){const e=K();return(o,n)=>(f(!0),S(U,null,G(m(e).region.keys,l=>(f(),S("div",{key:l.id},[(f(!0),S(U,null,G(l.polygons,a=>{var r;return f(),S("div",{key:a.id},[((r=m(e).drawingPolygon)==null?void 0:r.id)!==a.id?(f(),$(m(Dt),{key:0,id:a.id,"lat-lngs":a.latlngs,color:l.color,weight:l.weight},null,8,["id","lat-lngs","color","weight"])):ce("",!0)])}),128))]))),128))}}),Ut=b({__name:"map-markers",setup(t){const e=K();return(o,n)=>(f(!0),S(U,null,G(m(e).region.keys,l=>(f(),S("div",{key:l.id},[(f(!0),S(U,null,G(l.markers,a=>(f(),S("div",{key:a.id},[v(m(Et),{id:a.id,"lat-lng":a.latlngs,icon:m(Xe)(a.type)},null,8,["id","lat-lng","icon"])]))),128))]))),128))}}),Ft=b({__name:"map-controls",setup(t){return(e,o)=>(f(),S(U,null,[v(m(Ct),{position:"bottomright",imperial:!0,metric:!1}),v(m(Rt),{position:"bottomleft"}),v(m(Lt),{prefix:"",position:"topright"})],64))}}),Te={zoom:6,tile:{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},Gt=b({__name:"map-main",props:{isDrawing:{type:Boolean},handleDraw:{type:Function}},setup(t){const e=h([34.5,37.26]),o=h(Te.zoom);return(n,l)=>{const a=j("ui-spacing");return f(),$(a,{class:"map-wrap",vertical:"",fill:"",grow:""},{default:L(()=>[v(a,{class:Ae(["content",["map",{"cursor-pointer":n.isDrawing}]]),fill:"",grow:"",gap:"none"},{default:L(()=>[v(m(Tt),{ref:"map",zoom:o.value,"onUpdate:zoom":l[0]||(l[0]=r=>o.value=r),center:e.value,"onUpdate:center":l[1]||(l[1]=r=>e.value=r),useGlobalLeaflet:!1,options:{attributionControl:!1,zoomControl:!1},onClick:n.handleDraw},{default:L(()=>[v(m(Vt),Qe({"layer-type":"base"},m(Te).tile),null,16),Ye(n.$slots,"default",{},void 0,!0)]),_:3},8,["zoom","center","onClick"])]),_:3},8,["class"])]),_:3})}}}),Kt=ie(Gt,[["__scopeId","data-v-a0ea78c6"]]),Ht=b({__name:"home-page",setup(t){const e=K(),o=J(()=>e.drawingPolygon!==null),{handleDraw:n}=e;return(l,a)=>(f(),$(m(Kt),{"is-drawing":o.value,"handle-draw":m(n)},{default:L(()=>[v(ut),v(m(Ft)),v(m(Mt)),v(m($t)),v(m(Ut))]),_:1},8,["is-drawing","handle-draw"]))}});export{Ht as default};
