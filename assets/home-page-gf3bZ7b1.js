const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DJxG9KjN.js","assets/index-Dz1m0DEs.css"])))=>i.map(i=>d[i]);
import{i as x,o as B,a as ke,d as k,u as ie,b as yt,r as g,c as b,e as c,m as Ke,f as u,w as y,g as he,n as Ce,h as oe,j as U,k as f,_ as P,p as vt,v as _t,q as h,s as Ge,t as We,x as Z,y as C,z as M,A as ue,B as Ie,C as Oe,D as H,F as T,E as $,G as de,H as ce,I as N,M as Ve,J as gt,K as z,L as ge,N as ne,O as bt,P as V,Q as K,R as D,S as Ae,T as kt,U as ht,V as Ct,W as Pe}from"./index-DJxG9KjN.js";const Y={region:Symbol(),noteControls:Symbol()};function le(o,e,t){const n=`'${String(o)}' was not provided`,l=x(o);if(l===void 0)throw new Error(n);return l}function St(o){B(()=>{document.addEventListener("keydown",o)}),ke(()=>{document.removeEventListener("keydown",o)})}const Ze=k({__name:"m-modal",props:{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=ie(o,"modelValue"),t=yt();return(n,l)=>{const r=g("ui-modal");return c(),b(r,Ke({modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value=s)},u(t),{class:"modal",teleport:"#modal"}),{default:y(()=>[he(n.$slots,"default")]),_:3},16,["modelValue"])}}}),wt={class:"scroll-area"},Lt=k({__name:"scroll-block",props:{position:{}},setup(o){return(e,t)=>{const n=g("ui-spacing"),l=g("ui-wrapper");return c(),b(l,{class:"controls",onClick:t[0]||(t[0]=oe(()=>{},["stop"])),onMousedown:t[1]||(t[1]=oe(()=>{},["stop"])),onMouseup:t[2]||(t[2]=oe(()=>{},["stop"])),onMousemove:t[3]||(t[3]=oe(()=>{},["stop"])),onWheel:t[4]||(t[4]=oe(()=>{},["stop"])),paddings:"both",style:Ce(`${e.position}: 0;`)},{default:y(()=>[U("div",wt,[f(n,{class:"content",vertical:"",fill:"",align:"stretch",gap:"sm"},{default:y(()=>[he(e.$slots,"default",{},void 0,!0)]),_:3})])]),_:3},8,["style"])}}}),Je=P(Lt,[["__scopeId","data-v-603a9e8d"]]),Ot=k({__name:"m-color-input",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=ie(o,"modelValue");return(t,n)=>vt((c(),h("input",{class:"color-input",type:"color","onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l)},null,512)),[[_t,e.value,void 0,{lazy:!0}]])}}),Ye=P(Ot,[["__scopeId","data-v-379a2663"]]);var fe={},De;function Pt(){if(De)return fe;De=1,Object.defineProperty(fe,"__esModule",{value:!0});const o=Ge(),e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"};return fe.default=(0,o.defineComponent)({name:"CloseOutlined",render:function(n,l){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",e,l[0]||(l[0]=[(0,o.createElementVNode)("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8L295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512L196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1l216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",fill:"currentColor"},null,-1)]))}}),fe}var It=Pt();const Vt=We(It),At=k({__name:"key-card-polygon",props:{keyId:{},polygon:{},number:{}},setup(o){const e=Z(),t=C(o.polygon.value);function n(){e.keys.removePolygon(o.polygon.value.id)}function l(){e.keys.startDrawing(o.keyId,o.polygon.value.id)}return(r,s)=>{var p;const a=g("ui-button"),i=g("ui-input"),d=g("ui-spacing");return c(),b(d,{class:Ie(["polygon-card",{active:((p=u(e).keys.drawingPolygon)==null?void 0:p.id)===r.polygon.value.id}]),align:"center",gap:"sm"},{default:y(()=>{var m;return[f(a,{disabled:((m=u(e).keys.drawingPolygon)==null?void 0:m.id)===r.polygon.value.id,onClick:l,class:"key-draw-control-btn",size:"sm",variant:"outlined"},{default:y(()=>[M(" Draw #"+ue(r.number),1)]),_:1},8,["disabled"]),f(i,{class:"polygon-weight-input",size:"sm",modelValue:t.value.weight,"onUpdate:modelValue":s[0]||(s[0]=S=>t.value.weight=S),modelModifiers:{number:!0},type:"number",min:"0",max:"5"},null,8,["modelValue"]),f(a,{class:"key-draw-control-btn remove-polygon-btn",size:"sm",variant:"outlined",onClick:n},{default:y(()=>[f(u(Vt))]),_:1})]}),_:1},8,["class"])}}}),Tt=P(At,[["__scopeId","data-v-dc3cd711"]]),Rt=k({__name:"key-removal-modal",props:Oe({id:{}},{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}}),emits:Oe(["submit","cancel"],["update:modelValue"]),setup(o){const e=ie(o,"modelValue");return(t,n)=>{const l=g("ui-button"),r=g("ui-spacing"),s=g("ui-card");return c(),b(u(Ze),{class:"modal",modelValue:e.value,"onUpdate:modelValue":n[2]||(n[2]=a=>e.value=a)},{default:y(()=>[f(s,{class:"modal-card"},{default:y(()=>[f(r,{vertical:""},{default:y(()=>[n[5]||(n[5]=U("p",null,"Are you sure you want to delete this key?",-1)),f(r,null,{default:y(()=>[f(l,{size:"sm",color:"critical",onClick:n[0]||(n[0]=a=>t.$emit("submit",t.id))},{default:y(()=>n[3]||(n[3]=[M(" Yes ")])),_:1,__:[3]}),f(l,{size:"sm",onClick:n[1]||(n[1]=a=>t.$emit("cancel"))},{default:y(()=>n[4]||(n[4]=[M("No")])),_:1,__:[4]})]),_:1})]),_:1,__:[5]})]),_:1})]),_:1},8,["modelValue"])}}}),Mt=k({__name:"key-card",props:{id:{},number:{}},setup(o){const e=Z(),t=H(()=>e.keys.findById(o.id)),n=C(!1);function l(a){const i=a.target.value;e.markers.getByKeyId(t.value.id).forEach(p=>p.color=i)}function r(){n.value=!0}function s(){n.value=!1}return(a,i)=>{const d=g("ui-input"),p=g("ui-button"),m=g("ui-spacing"),S=g("ui-card");return c(),h(T,null,[f(S,{class:"key-card",size:"sm"},{default:y(()=>[f(m,{vertical:"",gap:"sm",align:"stretch"},{default:y(()=>[f(d,{placeholder:`Key #${a.number}`,size:"sm",modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=v=>t.value.name=v),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"]),f(u(Ye),{modelValue:t.value.color,"onUpdate:modelValue":i[1]||(i[1]=v=>t.value.color=v),onChange:l},null,8,["modelValue"]),(c(!0),h(T,null,$(t.value.polygons,(v,O)=>(c(),b(Tt,{key:v.id,keyId:a.id,polygon:C(v),number:O+1},null,8,["keyId","polygon","number"]))),128)),f(p,{size:"sm",onClick:i[2]||(i[2]=v=>u(e).keys.createPolygon(t.value.id))},{default:y(()=>i[4]||(i[4]=[M(" Add polygon ")])),_:1,__:[4]}),f(p,{size:"sm",color:"critical",onClick:r},{default:y(()=>i[5]||(i[5]=[M("Remove")])),_:1,__:[5]})]),_:1})]),_:1}),f(Rt,{id:a.id,modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=v=>n.value=v),onCancel:s,onSubmit:u(e).keys.remove},null,8,["id","modelValue","onSubmit"])],64)}}}),jt=P(Mt,[["__scopeId","data-v-9e6cfb3e"]]),Qe={currentCenter:Symbol()},Bt=k({__name:"region-controls",setup(o){const e=le(Qe.currentCenter),t=Z(),{region:n}=de(t);function l(){t.setCenter(e.value)}return St(r=>{r.key==="Escape"&&t.keys.stopDrawing(),r.ctrlKey&&r.key==="z"&&(r.preventDefault(),t.keys.removeLastPolygonCoords())}),(r,s)=>{const a=g("ui-input"),i=g("ui-button");return c(),b(u(Je),{position:"left"},{default:y(()=>[f(a,{placeholder:"Region name",size:"sm",class:"region-name-input",modelValue:u(n).name,"onUpdate:modelValue":s[0]||(s[0]=d=>u(n).name=d)},null,8,["modelValue"]),f(i,{size:"sm",onClick:u(t).fileManager.saveRegionToFile},{default:y(()=>s[1]||(s[1]=[M(" Save region ")])),_:1,__:[1]},8,["onClick"]),f(i,{onClick:l,size:"sm",variant:"outlined"},{default:y(()=>s[2]||(s[2]=[M(" Set map center ")])),_:1,__:[2]}),f(i,{disabled:!u(t).keys.drawingPolygon,onClick:u(t).keys.stopDrawing,class:"key-draw-control-btn",size:"sm",variant:"outlined"},{default:y(()=>s[3]||(s[3]=[M(" Stop drawing ")])),_:1,__:[3]},8,["disabled","onClick"]),(c(!0),h(T,null,$(u(t).region.keys,(d,p)=>(c(),b(jt,{id:d.id,key:d.id,number:p+1},null,8,["id","number"]))),128)),f(i,{size:"sm",onClick:u(t).keys.create},{default:y(()=>s[4]||(s[4]=[M("Add key")])),_:1,__:[4]},8,["onClick"])]),_:1})}}}),Et=P(Bt,[["__scopeId","data-v-8a2d7dab"]]),zt=k({__name:"info-panel",setup(o){const e=ce();return(t,n)=>{const l=g("ui-button");return c(),b(u(Je),{position:"right",class:"content"},{default:y(()=>[f(l,{size:"sm",variant:"outlined",onClick:u(e).close},{default:y(()=>n[0]||(n[0]=[M(" Close ")])),_:1,__:[0]},8,["onClick"]),he(t.$slots,"default",{},void 0,!0)]),_:3})}}}),$t=P(zt,[["__scopeId","data-v-6ea22b9f"]]),Nt=k({__name:"info-key-item",props:{data:{}},setup(o){return(e,t)=>{const n=g("ui-spacing");return c(),b(n,{align:"center",gap:"sm"},{default:y(()=>[U("div",{class:"key-color-circle",style:Ce({backgroundColor:e.data.color})},null,4),U("p",null,ue(e.data.name||"No name"),1)]),_:1})}}}),Dt=P(Nt,[["__scopeId","data-v-c834b7f2"]]),xt=["src"],Ut=k({__name:"marker-preview",props:{icon:{},color:{}},setup(o){return(e,t)=>(c(),h("div",{class:"marker-preview",style:Ce({backgroundColor:e.color})},[U("img",{src:e.icon,alt:"Icon"},null,8,xt)],4))}}),Xe=P(Ut,[["__scopeId","data-v-3686d4d3"]]),Ft={key:1},qt={class:"icons"},Ht={class:"marker-desc"},Kt="keys",Gt=k({__name:"region-keys",setup(o){const e=Z(),t=ce(),{region:n}=de(e);return(l,r)=>{const s=g("ui-spacing");return u(t).isOpened(Kt)?(c(),b(s,{key:0,class:"content",align:"stretch",vertical:"",fill:"",gap:"sm"},{default:y(()=>[r[0]||(r[0]=U("p",null,"Keys",-1)),u(n).keys.length?(c(),b(s,{key:0,vertical:"",fill:"",align:"stretch",gap:"sm"},{default:y(()=>[(c(!0),h(T,null,$(u(n).keys,a=>(c(),b(Dt,{key:a.id,data:a},null,8,["data"]))),128))]),_:1})):(c(),h("p",Ft,"No data")),r[1]||(r[1]=U("p",null,"Icons",-1)),U("div",qt,[(c(!0),h(T,null,$(u(Ve),a=>(c(),b(s,{class:"icon",align:"center",gap:"sm",key:a.id},{default:y(()=>[f(Xe,{icon:a.icon,color:"blue",class:"marker-preview"},null,8,["icon"]),U("p",Ht,ue(a.desc),1)]),_:2},1024))),128))])]),_:1,__:[0,1]})):N("",!0)}}}),Wt=P(Gt,[["__scopeId","data-v-3f161856"]]);var ye={},xe;function Zt(){if(xe)return ye;xe=1,Object.defineProperty(ye,"__esModule",{value:!0});const o=Ge(),e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"};return ye.default=(0,o.defineComponent)({name:"DeleteFilled",render:function(n,l){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",e,l[0]||(l[0]=[(0,o.createElementVNode)("path",{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z",fill:"currentColor"},null,-1)]))}}),ye}var Jt=Zt();const Yt=We(Jt);function Te(){return le(Y.noteControls)}const Qt={key:1},Xt=k({__name:"note-date",setup(o){const{selectedMarker:e,isSelected:t,marker:n}=Te(),l=Z(),r=H(()=>n.datetime?gt(n.datetime):"No datetime");function s(){l.markers.remove(n.id)}return(a,i)=>{const d=g("ui-input"),p=g("ui-button"),m=g("ui-spacing");return c(),b(m,{align:"center",gap:"sm"},{default:y(()=>[u(t)?(c(),b(d,{key:0,size:"sm",class:"datetime-input",modelValue:u(e).datetime,"onUpdate:modelValue":i[0]||(i[0]=S=>u(e).datetime=S),type:"datetime-local",placeholder:"Datetime"},null,8,["modelValue"])):(c(),h("p",Qt,ue(r.value),1)),u(t)?(c(),b(p,{key:2,size:"sm",variant:"outlined",color:"critical",onClick:oe(s,["stop"])},{default:y(()=>[f(u(Yt))]),_:1})):N("",!0)]),_:1})}}}),eo=P(Xt,[["__scopeId","data-v-50e19745"]]),to=["src"],oo=k({__name:"marker-icon-select-modal",props:{modelValue:{type:Boolean,required:!0,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=ie(o,"modelValue"),t=Z();function n(l){t.markers.setIconToSelected(l),e.value=!1}return(l,r)=>{const s=g("ui-button"),a=g("ui-spacing"),i=g("ui-card");return c(),b(u(Ze),{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=d=>e.value=d)},{default:y(()=>[f(i,{class:"card",size:"lg"},{default:y(()=>[f(a,{vertical:"",gap:"sm"},{default:y(()=>[r[1]||(r[1]=U("p",null,"Select marker",-1)),f(a,{wrap:"",gap:"sm"},{default:y(()=>[(c(!0),h(T,null,$(u(Ve),d=>(c(),b(s,{class:"marker-icon-btn",rounded:"",size:"sm",key:d.id,onClick:p=>n(d.type)},{default:y(()=>[U("img",{src:d.icon,alt:"icon",class:"marker-icon"},null,8,to)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1,__:[1]})]),_:1})]),_:1},8,["modelValue"])}}}),no=P(oo,[["__scopeId","data-v-da47e1b7"]]),lo=k({__name:"marker-icon-controls",setup(o){const{selectedMarker:e,isSelected:t}=Te(),n=C(!1);function l(){n.value=!0}return(r,s)=>{const a=g("ui-button"),i=g("ui-spacing");return c(),h(T,null,[u(t)?(c(),b(i,{key:0,align:"center",gap:"sm"},{default:y(()=>[f(a,{class:"open-marker-modal-btn",onClick:l},{default:y(()=>s[2]||(s[2]=[M(" Select icon ")])),_:1,__:[2]}),f(Xe,{color:u(e).color,icon:u(Ve)[u(e).type].icon},null,8,["color","icon"]),u(t)?(c(),b(u(Ye),{key:0,disabled:u(e).keyId,class:"color-select",modelValue:u(e).color,"onUpdate:modelValue":s[0]||(s[0]=d=>u(e).color=d)},null,8,["disabled","modelValue"])):N("",!0)]),_:1})):N("",!0),f(no,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=d=>n.value=d)},null,8,["modelValue"])],64)}}}),ro=P(lo,[["__scopeId","data-v-fc38d8f4"]]),ao={key:1,class:"note-text"},so=k({__name:"note-desc",setup(o){const{marker:e,selectedMarker:t,isSelected:n}=Te();return(l,r)=>{const s=g("ui-textarea");return u(n)?(c(),b(s,{key:0,class:"note-textarea",placeholder:"Description",modelValue:u(t).description,"onUpdate:modelValue":r[0]||(r[0]=a=>u(t).description=a)},null,8,["modelValue"])):(c(),h("p",ao,ue(u(e).description||"No description"),1))}}}),io=k({__name:"region-note",props:{marker:{}},setup(o){const e=le(Y.region),t=Z(),{selected:n}=de(t.markers),l=H(()=>{var a;return((a=t.markers.selected)==null?void 0:a.id)===o.marker.id}),r=H(()=>{var a;return((a=t.markers.focused)==null?void 0:a.id)===o.marker.id});z(Y.noteControls,{marker:o.marker,isSelected:l,selectedMarker:n});function s(){t.markers.select(o.marker.id)}return(a,i)=>{const d=g("ui-button"),p=g("ui-select-option"),m=g("ui-select"),S=g("ui-spacing"),v=g("ui-card");return c(),b(v,{class:Ie(["card",{selected:l.value}]),hoverable:"",onClick:s,key:a.marker.id,size:"sm",style:Ce({borderColor:r.value?a.marker.color:"var(--neutral-main)"})},{default:y(()=>[f(S,{vertical:"",gap:"sm",align:"stretch"},{default:y(()=>[f(eo),f(so),f(ro),l.value?(c(),b(d,{key:0,class:"place-btn",disabled:u(t).markers.isPlacing,onClick:u(t).markers.startPlacing,size:"sm"},{default:y(()=>i[1]||(i[1]=[M(" Place ")])),_:1,__:[1]},8,["disabled","onClick"])):N("",!0),l.value?(c(),b(m,{key:1,class:"key-select",size:"sm",placeholder:"Key",modelValue:u(n).keyId,"onUpdate:modelValue":i[0]||(i[0]=O=>u(n).keyId=O)},{default:y(()=>[(c(!0),h(T,null,$(u(e).keys,O=>(c(),b(p,{key:O.id,value:O.id,label:O.name||"Nameless"},null,8,["value","label"]))),128)),f(p,{value:null,label:"No key"})]),_:1},8,["modelValue"])):N("",!0)]),_:1})]),_:1},8,["class","style"])}}}),uo=P(io,[["__scopeId","data-v-57675eb5"]]),co={key:1},po="notes",mo=k({__name:"region-notes",setup(o){const e=Z(),t=ce(),{region:n}=de(e);return(l,r)=>{const s=g("ui-button"),a=g("ui-spacing");return u(t).isOpened(po)?(c(),b(a,{key:0,class:"content",align:"stretch",vertical:"",fill:"",gap:"sm"},{default:y(()=>[f(s,{size:"sm",onClick:u(e).markers.add},{default:y(()=>r[0]||(r[0]=[M("Add note")])),_:1,__:[0]},8,["onClick"]),u(n).markers.length?(c(),b(a,{key:0,vertical:"",fill:"",align:"stretch",gap:"sm"},{default:y(()=>[(c(!0),h(T,null,$(u(n).markers,i=>(c(),b(uo,{key:i.id,marker:i},null,8,["marker"]))),128))]),_:1})):(c(),h("p",co,"No notes"))]),_:1})):N("",!0)}}}),fo=P(mo,[["__scopeId","data-v-612f4ba3"]]);function yo(o){const e=ce(),t=H(()=>{var n;return((n=o.value)==null?void 0:n.id)||null});return ge(t,()=>{o&&e.open("notes")}),t}const Ue=(o,e)=>{for(const t of Object.keys(e))o.on(t,e[t])},et=o=>{for(const e of Object.keys(o)){const t=o[e];t&&J(t.cancel)&&t.cancel()}},vo=o=>!o||typeof o.charAt!="function"?o:o.charAt(0).toUpperCase()+o.slice(1),J=o=>typeof o=="function",F=(o,e,t)=>{for(const n in t){const l="set"+vo(n);o[l]?ge(()=>t[n],(r,s)=>{o[l](r,s)}):e[l]&&ge(()=>t[n],r=>{e[l](r)})}},R=(o,e,t={})=>{const n={...t};for(const l in o){const r=e[l],s=o[l];r&&(r&&r.custom===!0||s!==void 0&&(n[l]=s))}return n},Q=o=>{const e={},t={};for(const n in o)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const l=n.slice(2).toLocaleLowerCase();e[l]=o[n]}else t[n]=o[n];return{listeners:e,attrs:t}},_o=async o=>{const e=await Promise.all([V(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),V(()=>import("./marker-icon-C2eJqgqv.js"),[]),V(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete o.Default.prototype._getIconUrl,o.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},ve=o=>{const e=C((...n)=>console.warn(`Method ${o} has been invoked without being replaced`)),t=(...n)=>e.value(...n);return t.wrapped=e,z(o,t),t},_e=(o,e)=>o.wrapped.value=e,j=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,A=o=>{const e=x(o);if(e===void 0)throw new Error(`Attempt to inject ${o.description} before it was provided.`);return e},q=Symbol("useGlobalLeaflet"),X=Symbol("addLayer"),Re=Symbol("removeLayer"),pe=Symbol("registerControl"),go=Symbol("registerLayerControl"),tt=Symbol("canSetParentHtml"),ot=Symbol("setParentHtml"),nt=Symbol("setIcon"),bo=Symbol("bindPopup"),ko=Symbol("bindTooltip"),ho=Symbol("unbindPopup"),Co=Symbol("unbindTooltip"),me={options:{type:Object,default:()=>({}),custom:!0}},Se=o=>({options:o.options,methods:{}}),re={...me,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},Me=(o,e,t)=>{const n=A(X),l=A(Re),{options:r,methods:s}=Se(o),a=R(o,re,r),i=()=>n({leafletObject:e.value}),d=()=>l({leafletObject:e.value}),p={...s,setAttribution(m){d(),e.value.options.attribution=m,o.visible&&i()},setName(){d(),o.visible&&i()},setLayerType(){d(),o.visible&&i()},setVisible(m){e.value&&(m?i():d())},bindPopup(m){if(!e.value||!J(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(m)},bindTooltip(m){if(!e.value||!J(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(m)},unbindTooltip(){e.value&&(J(e.value.closeTooltip)&&e.value.closeTooltip(),J(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(J(e.value.closePopup)&&e.value.closePopup(),J(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(m){t.emit("update:visible",m)}};return z(bo,p.bindPopup),z(ko,p.bindTooltip),z(ho,p.unbindPopup),z(Co,p.unbindTooltip),Ae(()=>{p.unbindPopup(),p.unbindTooltip(),d()}),{options:a,methods:p}},je=(o,e)=>{if(o&&e.default)return ne("div",{style:{display:"none"}},e.default())},lt={...re,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},So=(o,e,t)=>{const{options:n,methods:l}=Me(o,e,t);return{options:R(o,lt,n),methods:l}},Be={...lt,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},wo=(o,e,t)=>{const{options:n,methods:l}=So(o,e,t),r=R(o,Be,n),s=A(Re),a={...l,setStroke(i){e.value.setStyle({stroke:i})},setColor(i){e.value.setStyle({color:i})},setWeight(i){e.value.setStyle({weight:i})},setOpacity(i){e.value.setStyle({opacity:i})},setLineCap(i){e.value.setStyle({lineCap:i})},setLineJoin(i){e.value.setStyle({lineJoin:i})},setDashArray(i){e.value.setStyle({dashArray:i})},setDashOffset(i){e.value.setStyle({dashOffset:i})},setFill(i){e.value.setStyle({fill:i})},setFillColor(i){e.value.setStyle({fillColor:i})},setFillOpacity(i){e.value.setStyle({fillOpacity:i})},setFillRule(i){e.value.setStyle({fillRule:i})},setClassName(i){e.value.setStyle({className:i})}};return ke(()=>{s({leafletObject:e.value})}),{options:r,methods:a}},Lo={...Be,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...Lo});const ae={...me,position:{type:String}},we=(o,e)=>{const{options:t,methods:n}=Se(o),l=R(o,ae,t),r={...n,setPosition(s){e.value&&e.value.setPosition(s)}};return Ae(()=>{e.value&&e.value.remove()}),{options:l,methods:r}},Oo=o=>o.default?ne("div",{ref:"root"},o.default()):null;k({name:"LControl",props:{...ae,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(o,e){const t=C(),n=C(),l=x(q),r=A(pe),{options:s,methods:a}=we(o,t);return B(async()=>{const{Control:i,DomEvent:d}=l?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),p=i.extend({onAdd(){return n.value}});t.value=K(new p(s)),F(a,t.value,o),r({leafletObject:t.value}),o.disableClickPropagation&&n.value&&d.disableClickPropagation(n.value),o.disableScrollPropagation&&n.value&&d.disableScrollPropagation(n.value),D(()=>e.emit("ready",t.value))}),{root:n,leafletObject:t}},render(){return Oo(this.$slots)}});const rt={...ae,prefix:{type:String}},Po=(o,e)=>{const{options:t,methods:n}=we(o,e),l=R(o,rt,t),r={...n,setPrefix(s){e.value.setPrefix(s)}};return{options:l,methods:r}},Io=k({name:"LControlAttribution",props:rt,setup(o,e){const t=C(),n=x(q),l=A(pe),{options:r,methods:s}=Po(o,t);return B(async()=>{const{control:a}=n?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(a.attribution(r)),F(s,t.value,o),l({leafletObject:t.value}),D(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});({...ae});const at={...ae,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Vo=(o,e)=>{const{options:t,methods:n}=we(o,e);return{options:R(o,at,t),methods:n}},Ao=k({name:"LControlScale",props:at,setup(o,e){const t=C(),n=x(q),l=A(pe),{options:r,methods:s}=Vo(o,t);return B(async()=>{const{control:a}=n?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(a.scale(r)),F(s,t.value,o),l({leafletObject:t.value}),D(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),st={...ae,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},To=(o,e)=>{const{options:t,methods:n}=we(o,e);return{options:R(o,st,t),methods:n}},Ro=k({name:"LControlZoom",props:st,setup(o,e){const t=C(),n=x(q),l=A(pe),{options:r,methods:s}=To(o,t);return B(async()=>{const{control:a}=n?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(a.zoom(r)),F(s,t.value,o),l({leafletObject:t.value}),D(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),it={...re};({...it});({...it});const Ee={...re,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},ut=(o,e,t)=>{const{options:n,methods:l}=Me(o,e,t),r=R(o,Ee,n),s={...l,setTileComponent(){var a;(a=e.value)==null||a.redraw()}};return Ae(()=>{e.value.off()}),{options:r,methods:s}},Mo=(o,e,t,n)=>o.extend({initialize(l){this.tileComponents={},this.on("tileunload",this._unloadTile),t.setOptions(this,l)},createTile(l){const r=this._tileCoordsToKey(l);this.tileComponents[r]=e.create("div");const s=ne({setup:n,props:["coords"]},{coords:l});return kt(s,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(l){const r=this._tileCoordsToKey(l.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});k({props:{...Ee,childRender:{type:Function,required:!0}},setup(o,e){const t=C(),n=C(null),l=C(!1),r=x(q),s=A(X),{options:a,methods:i}=ut(o,t,e);return B(async()=>{const{GridLayer:d,DomUtil:p,Util:m}=r?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),S=Mo(d,p,m,o.childRender);t.value=K(new S(a));const{listeners:v}=Q(e.attrs);t.value.on(v),F(i,t.value,o),s({...o,...i,leafletObject:t.value}),l.value=!0,D(()=>e.emit("ready",t.value))}),{root:n,ready:l,leafletObject:t}},render(){return this.ready?ne("div",{style:{display:"none"},ref:"root"}):null}});const Fe={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};k({name:"LIcon",props:{...Fe,...me},setup(o,e){const t=C(),n=x(q),l=A(tt),r=A(ot),s=A(nt);let a,i,d,p,m;const S=(G,L,I)=>{const E=G&&G.innerHTML;if(!L){I&&m&&l()&&r(E);return}const{listeners:te}=Q(e.attrs);m&&i(m,te);const{options:Le}=Se(o),W=R(o,Fe,Le);E&&(W.html=E),m=W.html?d(W):p(W),a(m,te),s(m)},v=()=>{D(()=>S(t.value,!0,!1))},O=()=>{D(()=>S(t.value,!1,!0))},ee={setIconUrl:v,setIconRetinaUrl:v,setIconSize:v,setIconAnchor:v,setPopupAnchor:v,setTooltipAnchor:v,setShadowUrl:v,setShadowRetinaUrl:v,setShadowAnchor:v,setBgPos:v,setClassName:v,setHtml:v};return B(async()=>{const{DomEvent:G,divIcon:L,icon:I}=n?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a=G.on,i=G.off,d=L,p=I,F(ee,{},o),new MutationObserver(O).observe(t.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),v()}),{root:t}},render(){const o=this.$slots.default?this.$slots.default():void 0;return ne("div",{ref:"root"},o)}});({...re});function dt(o,e,t){var n,l,r;e===void 0&&(e=50),t===void 0&&(t={});var s=(n=t.isImmediate)!=null&&n,a=(l=t.callback)!=null&&l,i=t.maxWait,d=Date.now(),p=[];function m(){if(i!==void 0){var v=Date.now()-d;if(v+e>=i)return i-v}return e}var S=function(){var v=[].slice.call(arguments),O=this;return new Promise(function(ee,G){var L=s&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,d=Date.now(),!s){var E=o.apply(O,v);a&&a(E),p.forEach(function(te){return(0,te.resolve)(E)}),p=[]}},m()),L){var I=o.apply(O,v);return a&&a(I),ee(I)}p.push({resolve:ee,reject:G})})};return S.cancel=function(v){r!==void 0&&clearTimeout(r),p.forEach(function(O){return(0,O.reject)(v)}),p=[]},S}const qe={...me,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},jo=k({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:qe,setup(o,e){const t=C(),n=bt({ready:!1,layersToAdd:[],layersInControl:[]}),{options:l}=Se(o),r=R(o,qe,l),{listeners:s,attrs:a}=Q(e.attrs),i=ve(X),d=ve(Re),p=ve(pe),m=ve(go);z(q,o.useGlobalLeaflet);const S=H(()=>{const L={};return o.noBlockingAnimations&&(L.animate=!1),L}),v=H(()=>{const L=S.value;return o.padding&&(L.padding=o.padding),o.paddingTopLeft&&(L.paddingTopLeft=o.paddingTopLeft),o.paddingBottomRight&&(L.paddingBottomRight=o.paddingBottomRight),L}),O={moveend:dt(L=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(L){const I=n.layersInControl.find(E=>E.name===L.name);I&&I.updateVisibleProp(!0)},overlayremove(L){const I=n.layersInControl.find(E=>E.name===L.name);I&&I.updateVisibleProp(!1)}};B(async()=>{o.useGlobalLeaflet&&(j.L=j.L||await V(()=>import("./index-DJxG9KjN.js").then(_=>_.l),__vite__mapDeps([0,1])));const{map:L,CRS:I,Icon:E,latLngBounds:te,latLng:Le,stamp:W}=o.useGlobalLeaflet?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(_){console.error(`The following error occurred running the provided beforeMapMount hook ${_.message}`)}await _o(E);const ft=typeof r.crs=="string"?I[r.crs]:r.crs;r.crs=ft||I.EPSG3857;const se={addLayer(_){_.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(_):n.layersInControl.find(w=>W(w.leafletObject)===W(_.leafletObject))||(n.layerControl.addLayer(_),n.layersInControl.push(_))),_.visible!==!1&&n.leafletRef.addLayer(_.leafletObject)},removeLayer(_){_.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(w=>w.name!==_.name):(n.layerControl.removeLayer(_.leafletObject),n.layersInControl=n.layersInControl.filter(w=>W(w.leafletObject)!==W(_.leafletObject)))),n.leafletRef.removeLayer(_.leafletObject)},registerLayerControl(_){n.layerControl=_,n.layersToAdd.forEach(w=>{n.layerControl.addLayer(w)}),n.layersToAdd=[],p(_)},registerControl(_){n.leafletRef.addControl(_.leafletObject)},setZoom(_){const w=n.leafletRef.getZoom();_!==w&&n.leafletRef.setZoom(_,S.value)},setCrs(_){const w=n.leafletRef.getBounds();n.leafletRef.options.crs=_,n.leafletRef.fitBounds(w,{animate:!1,padding:[0,0]})},fitBounds(_){n.leafletRef.fitBounds(_,v.value)},setBounds(_){if(!_)return;const w=te(_);w.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(w,0)&&(n.lastSetBounds=w,n.leafletRef.fitBounds(w))},setCenter(_){if(_==null)return;const w=Le(_),Ne=n.lastSetCenter||n.leafletRef.getCenter();(Ne.lat!==w.lat||Ne.lng!==w.lng)&&(n.lastSetCenter=w,n.leafletRef.panTo(w,S.value))}};_e(i,se.addLayer),_e(d,se.removeLayer),_e(p,se.registerControl),_e(m,se.registerLayerControl),n.leafletRef=K(L(t.value,r)),F(se,n.leafletRef,o),Ue(n.leafletRef,O),Ue(n.leafletRef,s),n.ready=!0,D(()=>e.emit("ready",n.leafletRef))}),ke(()=>{et(O),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const ee=H(()=>n.leafletRef),G=H(()=>n.ready);return{root:t,ready:G,leafletObject:ee,attrs:a}},render({attrs:o}){return o.style||(o.style={}),o.style.width||(o.style.width="100%"),o.style.height||(o.style.height="100%"),ne("div",{...o,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Bo=["Symbol(Comment)","Symbol(Text)"],Eo=["LTooltip","LPopup"],ct={...re,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},zo=(o,e,t)=>{const{options:n,methods:l}=Me(o,e,t),r=R(o,ct,n),s={...l,setDraggable(a){e.value.dragging&&(a?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(a){t.emit("update:latLng",a.latlng),t.emit("update:lat-lng",a.latlng)},setLatLng(a){if(a!=null&&e.value){const i=e.value.getLatLng();(!i||!i.equals(a))&&e.value.setLatLng(a)}}};return{options:r,methods:s}},$o=(o,e)=>{const t=e.slots.default&&e.slots.default();return t&&t.length&&t.some(No)};function No(o){return!(Bo.includes(o.type.toString())||Eo.includes(o.type.name))}const Do=k({name:"LMarker",props:ct,setup(o,e){const t=C(),n=C(!1),l=x(q),r=A(X);z(tt,()=>{var d;return!!((d=t.value)!=null&&d.getElement())}),z(ot,d=>{var p,m;const S=J((p=t.value)==null?void 0:p.getElement)&&((m=t.value)==null?void 0:m.getElement());S&&(S.innerHTML=d)}),z(nt,d=>{var p;return((p=t.value)==null?void 0:p.setIcon)&&t.value.setIcon(d)});const{options:s,methods:a}=zo(o,t,e),i={moveHandler:dt(a.latLngSync)};return B(async()=>{const{marker:d,divIcon:p}=l?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);$o(s,e)&&(s.icon=p({className:""})),t.value=K(d(o.latLng,s));const{listeners:m}=Q(e.attrs);t.value.on(m),t.value.on("move",i.moveHandler),F(a,t.value,o),r({...o,...a,leafletObject:t.value}),n.value=!0,D(()=>e.emit("ready",t.value))}),ke(()=>et(i)),{ready:n,leafletObject:t}},render(){return je(this.ready,this.$slots)}}),ze={...Be,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},pt=(o,e,t)=>{const{options:n,methods:l}=wo(o,e,t),r=R(o,ze,n),s={...l,setSmoothFactor(a){e.value.setStyle({smoothFactor:a})},setNoClip(a){e.value.setStyle({noClip:a})},addLatLng(a){e.value.addLatLng(a)}};return{options:r,methods:s}},be={...ze},xo=(o,e,t)=>{const{options:n,methods:l}=pt(o,e,t),r=R(o,be,n),s={...l,toGeoJSON(a){return e.value.toGeoJSON(a)}};return{options:r,methods:s}},Uo=k({name:"LPolygon",props:be,setup(o,e){const t=C(),n=C(!1),l=x(q),r=A(X),{options:s,methods:a}=xo(o,t,e);return B(async()=>{const{polygon:i}=l?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(i(o.latLngs,s));const{listeners:d}=Q(e.attrs);t.value.on(d),F(a,t.value,o),r({...o,...a,leafletObject:t.value}),n.value=!0,D(()=>e.emit("ready",t.value))}),{ready:n,leafletObject:t}},render(){return je(this.ready,this.$slots)}}),Fo=k({name:"LPolyline",props:ze,setup(o,e){const t=C(),n=C(!1),l=x(q),r=A(X),{options:s,methods:a}=pt(o,t,e);return B(async()=>{const{polyline:i}=l?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(i(o.latLngs,s));const{listeners:d}=Q(e.attrs);t.value.on(d),F(a,t.value,o),r({...o,...a,leafletObject:t.value}),n.value=!0,D(()=>e.emit("ready",t.value))}),{ready:n,leafletObject:t}},render(){return je(this.ready,this.$slots)}}),mt={...me,content:{type:String,default:null}};({...mt});({...be,latLngs:{...be.latLngs}});const $e={...Ee,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:o=>typeof o=="string"?!0:Array.isArray(o)?o.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},qo=(o,e,t)=>{const{options:n,methods:l}=ut(o,e,t),r=R(o,$e,n),s={...l};return{options:r,methods:s}},Ho=k({props:$e,setup(o,e){const t=C(),n=x(q),l=A(X),{options:r,methods:s}=qo(o,t,e);return B(async()=>{const{tileLayer:a}=n?j.L:await V(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);t.value=K(a(o.url,r));const{listeners:i}=Q(e.attrs);t.value.on(i),F(s,t.value,o),l({...o,...s,leafletObject:t.value}),D(()=>e.emit("ready",t.value))}),{leafletObject:t}},render(){return null}});({...mt});({...$e});const Ko=k({__name:"map-polylines",props:{drawingPolygonId:{}},setup(o){const e=o,t=le(Y.region);function n(l){return e.drawingPolygonId===l}return(l,r)=>(c(!0),h(T,null,$(u(t).keys,s=>(c(),h("div",{key:s.id},[(c(!0),h(T,null,$(s.polygons,a=>(c(),h("div",{key:a.id},[n(a.id)?(c(),b(u(Fo),{key:0,id:a.id,"lat-lngs":a.latlngs,color:s.color,weight:1},null,8,["id","lat-lngs","color"])):N("",!0)]))),128))]))),128))}}),Go=k({__name:"map-polygons",props:{drawingPolygonId:{}},setup(o){const e=o,t=le(Y.region);function n(l){return e.drawingPolygonId!==l}return(l,r)=>(c(!0),h(T,null,$(u(t).keys,s=>(c(),h("div",{key:s.id},[(c(!0),h(T,null,$(s.polygons,a=>(c(),h("div",{key:a.id},[n(a.id)?(c(),b(u(Uo),{key:0,id:a.id,"lat-lngs":a.latlngs,color:s.color,weight:a.weight},null,8,["id","lat-lngs","color","weight"])):N("",!0)]))),128))]))),128))}}),Wo=k({__name:"map-markers",props:{focusedMarkerId:{}},emits:["focus"],setup(o){const e=le(Y.region);return(t,n)=>(c(!0),h(T,null,$(u(e).markers,l=>(c(),h("div",{key:l.id},[l.latlngs?(c(),b(u(Do),{key:0,id:l.id,"lat-lng":l.latlngs,onClick:r=>t.$emit("focus",l.id),icon:u(ht)({type:l.type,color:l.color,focused:l.id===t.focusedMarkerId})},null,8,["id","lat-lng","onClick","icon"])):N("",!0)]))),128))}}),Zo=k({__name:"map-controls",setup(o){return(e,t)=>(c(),h(T,null,[f(u(Ao),{position:"bottomright",imperial:!0,metric:!1}),f(u(Ro),{position:"bottomleft"}),f(u(Io),{prefix:"",position:"topright"})],64))}}),He={zoom:4,tile:{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},Jo=k({__name:"map-main",props:{region:{},regionModifiers:{}},emits:Oe(["click"],["update:region"]),setup(o,{emit:e}){var d;const t=C(He.zoom),n=Ct("map"),l=e,r=ie(o,"region");z(Y.region,r);const s=C(Pe);z(Qe.currentCenter,s);const a=C(((d=r.value)==null?void 0:d.center)||Pe);ge(r,p=>{var m;(m=n==null?void 0:n.value)!=null&&m.leafletObject&&n.value.leafletObject.setView(p==null?void 0:p.center)});function i(){var p;if((p=n==null?void 0:n.value)!=null&&p.leafletObject){const m=n.value.leafletObject.getCenter();s.value=[m.lat,m.lng]}}return(p,m)=>{const S=g("ui-spacing");return c(),b(S,{class:"map-wrap",vertical:"",fill:"",grow:""},{default:y(()=>[f(S,{class:"content",fill:"",grow:"",gap:"none"},{default:y(()=>[r.value?(c(),b(u(jo),{key:0,ref:"map",zoom:t.value,"onUpdate:zoom":m[0]||(m[0]=v=>t.value=v),center:a.value,"onUpdate:center":m[1]||(m[1]=v=>a.value=v),useGlobalLeaflet:!1,options:{attributionControl:!1,zoomControl:!1},onClick:m[2]||(m[2]=v=>l("click",v)),onMoveend:i},{default:y(()=>[f(u(Ho),Ke({"layer-type":"base"},u(He).tile),null,16),he(p.$slots,"default",{},void 0,!0)]),_:3},8,["zoom","center"])):N("",!0)]),_:3})]),_:3})}}}),Yo=P(Jo,[["__scopeId","data-v-b147c77d"]]);function Qo(o){const e=C();return B(()=>{e.value=o||Pe}),e}const Xo=k({__name:"home-page",setup(o){const e=Z(),t=ce(),n=H(()=>e.keys.drawingPolygon!==null),l=de(e.markers).focused,r=yo(l);return Qo(e.region.center),(s,a)=>(c(),b(u(Yo),{class:Ie({"cursor-pointer":n.value,"cross-pointer":u(e).markers.isPlacing}),onClick:u(e).handleMapClick,region:u(e).region,"onUpdate:region":a[0]||(a[0]=i=>u(e).region=i)},{default:y(()=>{var i,d;return[f(u(Et)),u(t).opened?(c(),b(u($t),{key:0},{default:y(()=>[f(u(Wt)),f(u(fo))]),_:1})):N("",!0),f(u(Zo)),f(u(Ko),{"drawing-polygon-id":(i=u(e).keys.drawingPolygon)==null?void 0:i.id},null,8,["drawing-polygon-id"]),f(u(Go),{"drawing-polygon-id":(d=u(e).keys.drawingPolygon)==null?void 0:d.id},null,8,["drawing-polygon-id"]),f(u(Wo),{"focused-marker-id":u(r),onFocus:u(e).markers.focus},null,8,["focused-marker-id","onFocus"])]}),_:1},8,["class","onClick","region"]))}}),tn=P(Xo,[["__scopeId","data-v-ba8c0c76"]]);export{tn as default};
